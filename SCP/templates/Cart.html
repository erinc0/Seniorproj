<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recent Orders</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header>
<img src="{{ url_for('static', filename='estation1.png') }}" alt="eStation Logo" width="150">
</header>
<h1>Cart</h1>

<div id="cart-list">
    <p>Loading Cart...</p>
</div>
<p> <a href="{{ url_for('Bhomepage') }}"> Back to Buyer Homepage </a></p>
<script>
    async function LoadCart() {
        const buyerID = {{ session['id'] }}; // testing the buyer id you know
        const response = await fetch(`http://127.0.0.1:5000/cart?search=${buyerID}`);
        const data = await response.json();

        if (data.length === 0) {
            document.getElementById("cart-list").innerHTML = "<p>No recent orders found.</p>";
            return;
        }

        let table = "<table border='1'><tr><th>Cart Item ID</th><th>Product ID</th><th>Quantity</th></tr>";

        data.forEach(cart => {
            table += `<tr>
                        <td>${cart.CartItemID}</td>
                        <td>${cart.ProductID}</td>
                        <td>${cart.CartQuantity}</td>`;

            table += "</tr>";
        });

        table += "</table>";
        document.getElementById("cart-list").innerHTML = table;
    }



    window.onload = LoadCart;
</script>

</body>
</html>